<div class="team-standing-tables">
  <ng-container *ngIf="{ loading: loading$ | async } as o">
    <ng-container *ngIf="!o.loading else loader">
      <ng-container *ngIf="(topThreeTeams$ | async) as topThreeTeams">
        <team-standing-table [headerTemplateRef]="topThreeHeaderTemplate" [teamsTemplateRef]="topThreeTeamsTemplate"
          >Top 3 teams</team-standing-table
        >

        <ng-template #topThreeHeaderTemplate>
          <th class="left">Name</th>
          <th class="left">Division</th>
          <th class="left">Points</th>
        </ng-template>

        <ng-template #topThreeTeamsTemplate>
          <tr *ngFor="let team of topThreeTeams">
            <td class="left">
              <a href (click)="$event.preventDefault(); $event.stopPropagation(); gotoTeam(team.id)">{{ team.name }}</a>
            </td>
            <td class="left">{{ team.division }}</td>
            <td class="left">{{ team.points }}</td>
          </tr>
        </ng-template>
      </ng-container>

      <ng-container *ngIf="(topOffensiveTeams$ | async) as leaders">
        <team-standing-table [headerTemplateRef]="leaderHeaderTemplate" [teamsTemplateRef]="leaderTemplate"
          >Top 3 Offensive Teams</team-standing-table
        >

        <ng-template #leaderHeaderTemplate>
          <th class="left">Division</th>
          <th class="left">Name</th>
          <th class="left">Goals For</th>
        </ng-template>

        <ng-template #leaderTemplate>
          <tr *ngFor="let team of leaders">
            <td class="left">{{ team.division }}</td>
            <td class="left">
              <a href (click)="$event.preventDefault(); $event.stopPropagation(); gotoTeam(team.id)">{{ team.name }}</a>
            </td>
            <td class="left">{{ team.goalsFor }}</td>
          </tr>
        </ng-template>
      </ng-container>

      <ng-container *ngIf="(worstOffensiveTeams$ | async) as leaders">
        <team-standing-table [headerTemplateRef]="leaderHeaderTemplate" [teamsTemplateRef]="leaderTemplate"
          >Worst 3 Offensive Teams</team-standing-table
        >

        <ng-template #leaderHeaderTemplate>
          <th class="left">Division</th>
          <th class="left">Name</th>
          <th class="left">Goals For</th>
        </ng-template>

        <ng-template #leaderTemplate>
          <tr *ngFor="let team of leaders">
            <td class="left">{{ team.division }}</td>
            <td class="left">
              <a href (click)="$event.preventDefault(); $event.stopPropagation(); gotoTeam(team.id)">{{ team.name }}</a>
            </td>
            <td class="left">{{ team.goalsFor }}</td>
          </tr>
        </ng-template>
      </ng-container>

      <ng-container *ngIf="(topDefensiveTeams$ | async) as leaders">
        <team-standing-table [headerTemplateRef]="leaderHeaderTemplate" [teamsTemplateRef]="leaderTemplate"
          >Top 3 Defensive Teams</team-standing-table
        >

        <ng-template #leaderHeaderTemplate>
          <th class="left">Division</th>
          <th class="left">Name</th>
          <th class="left">Goals Against</th>
        </ng-template>

        <ng-template #leaderTemplate>
          <tr *ngFor="let team of leaders">
            <td class="left">{{ team.division }}</td>
            <td class="left">
              <a href (click)="$event.preventDefault(); $event.stopPropagation(); gotoTeam(team.id)">{{ team.name }}</a>
            </td>
            <td class="left">{{ team.goalsAgainst }}</td>
          </tr>
        </ng-template>
      </ng-container>

      <ng-container *ngIf="(worstDefensiveTeams$ | async) as leaders">
        <team-standing-table [headerTemplateRef]="leaderHeaderTemplate" [teamsTemplateRef]="leaderTemplate"
          >Worst 3 Defensive Teams</team-standing-table
        >

        <ng-template #leaderHeaderTemplate>
          <th class="left">Division</th>
          <th class="left">Name</th>
          <th class="left">Goals Against</th>
        </ng-template>

        <ng-template #leaderTemplate>
          <tr *ngFor="let team of leaders">
            <td class="left">{{ team.division }}</td>
            <td class="left">
              <a href (click)="$event.preventDefault(); $event.stopPropagation(); gotoTeam(team.id)">{{ team.name }}</a>
            </td>
            <td class="left">{{ team.goalsAgainst }}</td>
          </tr>
        </ng-template>
      </ng-container>
    </ng-container>
  </ng-container>

  <ng-template #loader>
    <content-loader [height]="150">
      <svg:rect x="20" y="20" rx="3" ry="3" width="250" height="5" />
      <svg:rect x="20" y="35" rx="3" ry="3" width="250" height="5" />
      <svg:rect x="20" y="50" rx="3" ry="3" width="250" height="5" />
      <svg:rect x="20" y="65" rx="3" ry="3" width="250" height="5" />
      <svg:rect x="20" y="80" rx="3" ry="3" width="250" height="5" />
      <svg:rect x="20" y="95" rx="3" ry="3" width="250" height="5" />
      <svg:rect x="20" y="110" rx="3" ry="3" width="250" height="5" />
      <svg:rect x="20" y="125" rx="3" ry="3" width="250" height="5" />
    </content-loader>
  </ng-template>
</div>
