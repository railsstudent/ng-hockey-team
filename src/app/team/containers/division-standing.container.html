<div class="division-tables">
  <ng-container *ngIf="(divisionStanding$ | async) as divisionStanding">
    <ng-container *ngFor="let division of orderOfDivision">
      <team-standing-table
        [title]="division"
        [headerTemplateRef]="headerTemplate"
        [teamsTemplateRef]="teamsTemplate"
      ></team-standing-table>

      <ng-template #headerTemplate>
        <th class="left">Name</th>
        <th class="left">Number of games</th>
        <th class="left">Win</th>
        <th class="left">Loss</th>
        <th class="left">Draw</th>
        <th class="left">OT Win</th>
        <th class="left">OT Loss</th>
        <th class="left">Winning %</th>
        <th class="left">Losing %</th>
        <th class="left">Draw %</th>
        <th class="left">Goals For</th>
        <th class="left">Goals Against</th>
        <th class="left">Points</th>
      </ng-template>

      <ng-template #teamsTemplate>
        <tr *ngFor="let team of divisionStanding[division]">
          <td class="left">
            <a href (click)="$event.preventDefault(); $event.stopPropagation(); gotoTeam(team.id)">{{ team.name }}</a>
          </td>
          <td class="left">{{ team.gamesPlayed }}</td>
          <td class="left">{{ team.numWin }}</td>
          <td class="left">{{ team.numLoss }}</td>
          <td class="left">{{ team.numDraw }}</td>
          <td class="left">{{ team.numOTWin }}</td>
          <td class="left">{{ team.numOTLoss }}</td>
          <td class="left">{{ team.winPercentage.toFixed(2) }}</td>
          <td class="left">{{ team.lossPercentage.toFixed(2) }}</td>
          <td class="left">{{ team.drawPercentage.toFixed(2) }}</td>
          <td class="left">{{ team.goalsFor }}</td>
          <td class="left">{{ team.goalsAgainst }}</td>
          <td class="left">{{ team.points }}</td>
        </tr>
      </ng-template>
    </ng-container>
  </ng-container>
</div>
